<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Conex_resource (conex.Conex_resource)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">conex</a> &#x00BB; Conex_resource</nav><h1>Module <code>Conex_resource</code></h1><p>Persistent data: on wire and record types</p><p>Every resource in conex is a piece of data (or metadata), and has its own purpose. Resources stored on disk consists of a common header: a name, a type, a counter, an epoch, and a creation timestamp. There are broadly three kinds of resources: those containing identities (<code>Team</code> and <code>Author</code>), those regulating access to packages (<code>Authorisation</code>), and those with the digests of the opam repository data (<code>Releases</code> and <code>Release</code>).</p><nav class="toc"><ul><li><a href="#names-and-identifiers">Names and identifiers</a></li><li><a href="#wire-format">Wire format</a></li><li><a href="#resource-types">Resource types</a></li><li><a href="#digests">Digests</a></li><li><a href="#asymmetric-key-types">Asymmetric key types</a></li><li><a href="#cryptographic-signatures">Cryptographic signatures</a></li><li><a href="#root">Root</a></li></ul></nav></header><section><header><h2 id="names-and-identifiers"><a href="#names-and-identifiers" class="anchor"></a>Names and identifiers</h2></header><dl><dt class="spec type" id="type-name"><a href="#type-name" class="anchor"></a><code><span class="keyword">type</span> name</code><code> = string</code></dt><dd><p>The name of resources, used e.g. for package names.</p></dd></dl><dl><dt class="spec value" id="val-pp_name"><a href="#val-pp_name" class="anchor"></a><code><span class="keyword">val</span> pp_name : <span><a href="index.html#type-name">name</a> <a href="../Conex_utils/index.html#type-fmt">Conex_utils.fmt</a></span></code></dt><dd><p><code>pp_name name</code> is a pretty printer for <code>name</code>.</p></dd></dl><dl><dt class="spec value" id="val-name_equal"><a href="#val-name_equal" class="anchor"></a><code><span class="keyword">val</span> name_equal : <a href="index.html#type-name">name</a> <span>&#45;&gt;</span> <a href="index.html#type-name">name</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>name_equal a b</code> is the result of a case insensitive comparison of <code>a</code> and <code>b</code>.</p></dd></dl><dl><dt class="spec type" id="type-identifier"><a href="#type-identifier" class="anchor"></a><code><span class="keyword">type</span> identifier</code><code> = string</code></dt><dd><p>The type of identifiers.</p></dd></dl><dl><dt class="spec value" id="val-pp_id"><a href="#val-pp_id" class="anchor"></a><code><span class="keyword">val</span> pp_id : <span><a href="index.html#type-identifier">identifier</a> <a href="../Conex_utils/index.html#type-fmt">Conex_utils.fmt</a></span></code></dt><dd><p><code>pp_id id</code> is a pretty printer for <code>identifier</code>.</p></dd></dl><dl><dt class="spec value" id="val-id_equal"><a href="#val-id_equal" class="anchor"></a><code><span class="keyword">val</span> id_equal : <a href="index.html#type-identifier">identifier</a> <span>&#45;&gt;</span> <a href="index.html#type-identifier">identifier</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>id_equal a b</code> is the result of a case insensitive comparison of <code>a</code> and <code>b</code>.</p></dd></dl><dl><dt class="spec type" id="type-timestamp"><a href="#type-timestamp" class="anchor"></a><code><span class="keyword">type</span> timestamp</code><code> = string</code></dt><dd><p>The type for a timestamp, always a RFC3339 string in UTC (no timezone information).</p></dd></dl><dl><dt class="spec value" id="val-pp_timestamp"><a href="#val-pp_timestamp" class="anchor"></a><code><span class="keyword">val</span> pp_timestamp : <span><a href="index.html#type-timestamp">timestamp</a> <a href="../Conex_utils/index.html#type-fmt">Conex_utils.fmt</a></span></code></dt></dl></section><section><header><h2 id="wire-format"><a href="#wire-format" class="anchor"></a>Wire format</h2></header><dl><dt class="spec module" id="module-Wire"><a href="#module-Wire" class="anchor"></a><code><span class="keyword">module</span> <a href="Wire/index.html">Wire</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The wire encoding is abstract here, one suitable decoding and encoding engine is <a href="../Conex_opam_encoding/index.html"><code>Conex_opam_encoding</code></a>. The wire encoding is used for digest computations, and persistent storage on disk.</p></dd></dl></section><section><header><h2 id="resource-types"><a href="#resource-types" class="anchor"></a>Resource types</h2></header><dl><dt class="spec type" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type</span> typ</code> = <code>[ </code><table class="variant"><tr id="type-typ.Root" class="anchored"><td class="def constructor"><a href="#type-typ.Root" class="anchor"></a><code>| </code><code>`Root</code></td></tr><tr id="type-typ.Targets" class="anchored"><td class="def constructor"><a href="#type-typ.Targets" class="anchor"></a><code>| </code><code>`Targets</code></td></tr></table><code> ]</code></dt><dd><p>The sum type of all possible resources.</p></dd></dl><dl><dt class="spec value" id="val-typ_to_string"><a href="#val-typ_to_string" class="anchor"></a><code><span class="keyword">val</span> typ_to_string : <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>resource_to_string res</code> is the string representation of <code>res</code>.</p></dd></dl><dl><dt class="spec value" id="val-string_to_typ"><a href="#val-string_to_typ" class="anchor"></a><code><span class="keyword">val</span> string_to_typ : string <span>&#45;&gt;</span> <span><a href="index.html#type-typ">typ</a> option</span></code></dt><dd><p><code>string_to_resource str</code> is either <code>Some resource</code> or <code>None</code>.</p></dd></dl><dl><dt class="spec value" id="val-pp_typ"><a href="#val-pp_typ" class="anchor"></a><code><span class="keyword">val</span> pp_typ : <span><a href="index.html#type-typ">typ</a> <a href="../Conex_utils/index.html#type-fmt">Conex_utils.fmt</a></span></code></dt><dd><p><code>pp_resource pp</code> is a pretty printer for <code>resource</code>.</p></dd></dl><dl><dt class="spec value" id="val-typ_equal"><a href="#val-typ_equal" class="anchor"></a><code><span class="keyword">val</span> typ_equal : <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> <a href="index.html#type-typ">typ</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>resource_equal a b</code> is <code>true</code> if they are the same, otherwise <code>false</code>.</p></dd></dl><dl><dt class="spec value" id="val-typ_of_wire"><a href="#val-typ_of_wire" class="anchor"></a><code><span class="keyword">val</span> typ_of_wire : <a href="Wire/index.html#type-s">Wire.s</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-typ">typ</a>, string)</span> Stdlib.result</span></code></dt></dl><dl><dt class="spec type" id="type-err"><a href="#type-err" class="anchor"></a><code><span class="keyword">type</span> err</code> = <code>[ </code><table class="variant"><tr id="type-err.Parse" class="anchored"><td class="def constructor"><a href="#type-err.Parse" class="anchor"></a><code>| </code><code>`Parse <span class="keyword">of</span> string</code></td></tr><tr id="type-err.Unknown_alg" class="anchored"><td class="def constructor"><a href="#type-err.Unknown_alg" class="anchor"></a><code>| </code><code>`Unknown_alg <span class="keyword">of</span> string</code></td></tr><tr id="type-err.Malformed" class="anchored"><td class="def constructor"><a href="#type-err.Malformed" class="anchor"></a><code>| </code><code>`Malformed</code></td></tr></table><code> ]</code></dt></dl><dl><dt class="spec value" id="val-pp_err"><a href="#val-pp_err" class="anchor"></a><code><span class="keyword">val</span> pp_err : <span><a href="index.html#type-err">err</a> <a href="../Conex_utils/index.html#type-fmt">Conex_utils.fmt</a></span></code></dt></dl><dl><dt class="spec module" id="module-Header"><a href="#module-Header" class="anchor"></a><code><span class="keyword">module</span> <a href="Header/index.html">Header</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Common header on disk</p></dd></dl></section><section><header><h2 id="digests"><a href="#digests" class="anchor"></a>Digests</h2></header><div class="spec module" id="module-Digest"><a href="#module-Digest" class="anchor"></a><code><span class="keyword">module</span> <a href="Digest/index.html">Digest</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Digest_map"><a href="#module-Digest_map" class="anchor"></a><code><span class="keyword">module</span> <a href="Digest_map/index.html">Digest_map</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h2 id="asymmetric-key-types"><a href="#asymmetric-key-types" class="anchor"></a>Asymmetric key types</h2></header><div class="spec module" id="module-Key"><a href="#module-Key" class="anchor"></a><code><span class="keyword">module</span> <a href="Key/index.html">Key</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h2 id="cryptographic-signatures"><a href="#cryptographic-signatures" class="anchor"></a>Cryptographic signatures</h2></header><div class="spec module" id="module-Signature"><a href="#module-Signature" class="anchor"></a><code><span class="keyword">module</span> <a href="Signature/index.html">Signature</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-to_be_signed"><a href="#val-to_be_signed" class="anchor"></a><code><span class="keyword">val</span> to_be_signed : <a href="Wire/index.html#type-t">Wire.t</a> <span>&#45;&gt;</span> <a href="index.html#type-timestamp">timestamp</a> <span>&#45;&gt;</span> <a href="index.html#type-identifier">identifier</a> <span>&#45;&gt;</span> <a href="Signature/index.html#type-alg">Signature.alg</a> <span>&#45;&gt;</span> <a href="Wire/index.html#type-t">Wire.t</a></code></dt><dd><p><code>to_be_signed data timestamp id algorithm</code> prepares the representation used by signing and verification</p></dd></dl><dl><dt class="spec module" id="module-Expression"><a href="#module-Expression" class="anchor"></a><code><span class="keyword">module</span> <a href="Expression/index.html">Expression</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd></dd></dl></section><section><header><h2 id="root"><a href="#root" class="anchor"></a>Root</h2></header><aside><p>The root contains the (offline) root keys, also defines snapshot, timestamp, and maintainers. Furthermore, it contains configuration information such as where keys are located in this repository and where the data is stored.</p></aside><div class="spec module" id="module-Root"><a href="#module-Root" class="anchor"></a><code><span class="keyword">module</span> <a href="Root/index.html">Root</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Delegation"><a href="#module-Delegation" class="anchor"></a><code><span class="keyword">module</span> <a href="Delegation/index.html">Delegation</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Target"><a href="#module-Target" class="anchor"></a><code><span class="keyword">module</span> <a href="Target/index.html">Target</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Targets"><a href="#module-Targets" class="anchor"></a><code><span class="keyword">module</span> <a href="Targets/index.html">Targets</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>